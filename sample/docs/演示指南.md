# K线标记库演示指南

本示例演示了如何使用 `kline-marker-lib` 库在 K线图上添加各种标记和趋势区间背景。

## 🚀 功能演示

### 1. K线图基础功能

- 显示标准的蜡烛图（K线图）
- 支持触摸缩放和拖动
- 自定义样式配置

### 2. 标记功能

- **买入标记** (BUY)：绿色圆角矩形，显示在K线下方
- **卖出标记** (SELL)：红色圆角矩形，显示在K线上方
- **数字标记** (NUMBER)：蓝色圆形，可显示数字或文字
- **上三角标记** (UP_TRIANGLE)：橙色向上三角形
- **下三角标记** (DOWN_TRIANGLE)：橙色向下三角形

### 3. 趋势区间背景

- **上涨趋势** (RISING)：绿色渐变背景
- **下跌趋势** (FALLING)：红色渐变背景
- **中性趋势** (NEUTRAL)：蓝色渐变背景

## 📱 操作说明

### 界面布局

1. **标题区域**：显示"K线标记库演示"
2. **操作按钮区域**：
    - `添加标记`：添加示例标记到K线图
    - `添加趋势`：添加趋势区间背景
    - `清除标记`：清除所有标记
    - `清除全部`：清除标记和趋势区间
3. **K线图区域**：显示图表和标记
4. **导航按钮**：跳转到使用指南页面

### 操作步骤

1. **启动应用**：应用启动后会自动加载30天的模拟K线数据
2. **添加标记**：点击"添加标记"按钮，将在指定日期添加各种类型的标记
3. **添加趋势背景**：点击"添加趋势"按钮，将添加不同类型的趋势区间背景
4. **交互操作**：可以拖动和缩放图表查看详细信息
5. **清除功能**：使用清除按钮清理图表

## 🔧 技术实现

### 核心组件

#### 1. 数据模型

```java
public class KLineData {
    private Date date;      // 日期
    private float open;     // 开盘价
    private float high;     // 最高价
    private float low;      // 最低价
    private float close;    // 收盘价
    private float volume;   // 成交量
}
```

#### 2. 数据适配器

```java
public class KLineDataAdapterImpl implements KLineDataAdapter<KLineData> {
    // 实现接口方法，适配K线数据到标记库
}
```

#### 3. 标记管理器初始化

```java
KLineMarkerManager<KLineData> markerManager =
        new KLineMarkerManager.Builder<KLineData>()
                .context(requireContext())
                .chart(chart)
                .dataAdapter(adapter)
                .markerConfig(markerConfig)
                .trendRegionConfig(trendConfig)
                .build();
```

### 配置示例

#### 标记配置

```java
MarkerConfig markerConfig = new MarkerConfig.Builder()
        .markerSize(16f)
        .buyColor(Color.parseColor("#4CAF50"))
        .sellColor(Color.parseColor("#F44336"))
        .numberColor(Color.parseColor("#2196F3"))
        .upTriangleColor(Color.parseColor("#FF9800"))
        .downTriangleColor(Color.parseColor("#FF9800"))
        .build();
```

#### 趋势区间配置

```java
TrendRegionConfig trendConfig = new TrendRegionConfig.Builder()
        .risingColor(Color.parseColor("#4CAF50"))
        .fallingColor(Color.parseColor("#F44336"))
        .neutralColor(Color.parseColor("#2196F3"))
        .topAlpha(0.3f)
        .bottomAlpha(0.1f)
        .enableBezierCurve(true)
        .enableGradient(true)
        .build();
```

## 📊 示例数据

### K线数据

- 时间范围：2024年1月1日 - 2024年1月30日
- 数据类型：模拟股价数据
- 价格范围：基准价格100，随机波动

### 标记数据

- 2024-01-05：买入标记
- 2024-01-10：数字标记 "1"
- 2024-01-15：卖出标记
- 2024-01-20：上三角标记
- 2024-01-25：下三角标记

### 趋势区间

- 上涨趋势：2024-01-03 至 2024-01-12
- 中性趋势：2024-01-13 至 2024-01-17
- 下跌趋势：2024-01-18 至 2024-01-28

## 💡 扩展建议

### 自定义标记

可以通过修改 `MarkerData` 来添加自定义标记类型和样式。

### 动态数据

可以集成真实的股票或加密货币API，替换模拟数据。

### 更多交互

可以添加长按、双击等手势支持，实现更丰富的交互功能。

### 数据持久化

可以将标记和趋势区间数据保存到本地数据库或云端。

## 🎯 注意事项

1. **性能优化**：大量数据时，标记库会自动进行可视区域裁剪
2. **内存管理**：及时释放不需要的资源，避免内存泄漏
3. **线程安全**：UI操作需要在主线程中进行
4. **兼容性**：确保 MPAndroidChart 版本兼容

## 📝 总结

这个示例展示了 `kline-marker-lib` 库的主要功能：

- ✅ 多种标记类型支持
- ✅ 趋势区间背景渲染
- ✅ 灵活的配置系统
- ✅ 高性能的图表渲染
- ✅ 简单易用的API设计

通过这个演示，您可以快速了解如何集成和使用这个库来增强您的K线图表功能。 