# K线标记颜色预设系统使用指南

## 概述

为了避免杂乱的颜色使用，我们引入了统一的颜色预设系统，基于以下设计原则：

1. **谷歌Logo四色**：蓝、红、绿、黄 - 经过验证的优秀配色方案
2. **股票经典色彩**：中国股市的红绿配色
3. **经典紫色**：菱形标记的经典紫色
4. **保持自定义**：完全支持自定义颜色

## 颜色预设

### 谷歌Logo四色

| 颜色 | 色值 | 适用场景 | 示例 |
|------|------|----------|------|
| 谷歌蓝 | `0xFF4285F4` | 信息、提示类标记 | 信息标记、通知 |
| 谷歌红 | `0xFFEA4335` | 警告、错误、卖出类标记 | 警告、错误、卖出 |
| 谷歌绿 | `0xFF34A853` | 成功、买入类标记 | 成功、买入 |
| 谷歌黄 | `0xFFFBBC04` | 重要、关注类标记 | 重要事件、星标 |

### 股票经典色彩

| 颜色 | 色值 | 适用场景 |
|------|------|----------|
| 股票红 | `0xFFFF4444` | 中国股市下跌色 |
| 股票绿 | `0xFF00AA00` | 中国股市上涨色 |

### 经典紫色

| 颜色 | 色值 | 适用场景 |
|------|------|----------|
| 菱形紫 | `0xFF9C27B0` | 经典的菱形标记紫色 |

## 使用方法

### 1. 使用预设标记（推荐）

```java
// 买入标记 - 自动使用谷歌绿色
MarkerData buyMarker = MarkerData.createBuyMarker(date, "B");

// 卖出标记 - 自动使用谷歌红色
MarkerData sellMarker = MarkerData.createSellMarker(date, "S");

// 信息标记 - 自动使用谷歌蓝色
MarkerData infoMarker = MarkerData.createInfoMarker(date, "i");

// 重要标记 - 自动使用谷歌黄色
MarkerData importantMarker = MarkerData.createImportantMarker(date, "★");

// 事件标记 - 自动使用菱形紫色
MarkerData eventMarker = MarkerData.createEventMarker(date, "E");
```

### 2. 直接使用颜色预设

```java
// 谷歌四色标记
MarkerData blueMarker = MarkerData.createCustomMarker(date, "蓝", MarkerPresets.googleBlue());
MarkerData redMarker = MarkerData.createCustomMarker(date, "红", MarkerPresets.googleRed());
MarkerData greenMarker = MarkerData.createCustomMarker(date, "绿", MarkerPresets.googleGreen());
MarkerData yellowMarker = MarkerData.createCustomMarker(date, "黄", MarkerPresets.googleYellow());

// 股票色彩标记
MarkerData stockUpMarker = MarkerData.createCustomMarker(date, "涨", MarkerPresets.stockGreen());
MarkerData stockDownMarker = MarkerData.createCustomMarker(date, "跌", MarkerPresets.stockRed());

// 菱形紫色标记
MarkerData purpleMarker = MarkerData.createCustomMarker(date, "紫", MarkerPresets.diamondPurple());
```

### 3. 使用颜色索引

```java
// 根据颜色索引创建标记（0-6对应主要调色板）
MarkerData marker0 = MarkerData.createCustomMarker(date, "0", 
    MarkerPresets.fromColorIndex(0, MarkerShape.CIRCLE)); // 谷歌蓝

MarkerData marker1 = MarkerData.createCustomMarker(date, "1", 
    MarkerPresets.fromColorIndex(1, MarkerShape.RECTANGLE)); // 谷歌红

MarkerData marker2 = MarkerData.createCustomMarker(date, "2", 
    MarkerPresets.fromColorIndex(2, MarkerShape.DIAMOND)); // 谷歌绿
```

### 4. 基于预设的自定义

```java
// 基于谷歌蓝色进行自定义
MarkerData customBlue = MarkerData.createCustomMarker(date, "自定义蓝",
    MarkerPresets.customize(MarkerPresets.googleBlue())
        .shape(MarkerShape.STAR)
        .markerSize(14f)
        .lineLength(LineLength.LONG)
        .build());

// 基于股票绿色进行自定义
MarkerData customStockGreen = MarkerData.createCustomMarker(date, "自定义股票绿",
    MarkerPresets.customize(MarkerPresets.stockGreen())
        .shape(MarkerShape.DIAMOND)
        .position(MarkerPosition.ABOVE)
        .build());
```

### 5. 直接使用颜色常量

```java
// 在自定义配置中使用颜色常量
MarkerData customMarker = new MarkerData(date, "自定义", 
    new MarkerConfig.Builder()
        .shape(MarkerShape.CIRCLE)
        .backgroundColor(MarkerColors.GOOGLE_BLUE)
        .textColor(MarkerColors.BuyColors.TEXT)
        .lineColor(MarkerColors.getDarkerVariant(MarkerColors.GOOGLE_BLUE))
        .build());
```

## 颜色工具方法

### 获取颜色变体

```java
// 获取深色变体（用于线条等）
int darkerBlue = MarkerColors.getDarkerVariant(MarkerColors.GOOGLE_BLUE);

// 获取浅色变体（用于背景等）
int lighterBlue = MarkerColors.getLighterVariant(MarkerColors.GOOGLE_BLUE);

// 获取半透明版本
int transparentBlue = MarkerColors.getTransparentVariant(MarkerColors.GOOGLE_BLUE, 128);
```

### 根据标记类型获取推荐颜色

```java
// 根据标记类型获取推荐颜色
int buyColor = MarkerColors.getRecommendedColor(MarkerColors.MarkerType.BUY);
int sellColor = MarkerColors.getRecommendedColor(MarkerColors.MarkerType.SELL);
int infoColor = MarkerColors.getRecommendedColor(MarkerColors.MarkerType.INFO);
```

## 预设颜色方案

### 买入相关颜色方案

```java
// 使用买入颜色方案
MarkerData buyMarker = new MarkerData(date, "买入",
    new MarkerConfig.Builder()
        .backgroundColor(MarkerColors.BuyColors.BACKGROUND)  // 谷歌绿
        .textColor(MarkerColors.BuyColors.TEXT)              // 白色
        .lineColor(MarkerColors.BuyColors.LINE)              // 深绿色
        .build());
```

### 卖出相关颜色方案

```java
// 使用卖出颜色方案
MarkerData sellMarker = new MarkerData(date, "卖出",
    new MarkerConfig.Builder()
        .backgroundColor(MarkerColors.SellColors.BACKGROUND) // 谷歌红
        .textColor(MarkerColors.SellColors.TEXT)             // 白色
        .lineColor(MarkerColors.SellColors.LINE)             // 深红色
        .build());
```

### 其他颜色方案

- `MarkerColors.InfoColors` - 信息相关颜色方案
- `MarkerColors.ImportantColors` - 重要标记颜色方案
- `MarkerColors.EventColors` - 事件标记颜色方案
- `MarkerColors.StockColors` - 股票相关颜色方案

## 最佳实践

### 1. 优先使用预设

```java
// ✅ 推荐：使用预设标记
MarkerData.createBuyMarker(date, "B");

// ❌ 不推荐：硬编码颜色
new MarkerConfig.Builder().backgroundColor(0xFF00FF00);
```

### 2. 保持颜色一致性

```java
// ✅ 推荐：同类标记使用相同颜色系
MarkerData.createBuyMarker(date1, "买入1");
MarkerData.createCustomMarker(date2, "买入2", MarkerPresets.googleGreen());

// ❌ 不推荐：同类标记使用不同颜色
MarkerData.createBuyMarker(date1, "买入1");  // 绿色
new MarkerData(date2, "买入2", new MarkerConfig.Builder().backgroundColor(0xFFFF0000)); // 红色
```

### 3. 考虑可访问性

```java
// ✅ 推荐：黄色背景使用黑色文字
MarkerPresets.googleYellow(); // 自动使用黑色文字

// ✅ 推荐：深色背景使用白色文字
MarkerPresets.googleBlue();   // 自动使用白色文字
```

### 4. 合理使用自定义

```java
// ✅ 推荐：基于预设进行微调
MarkerPresets.customize(MarkerPresets.googleBlue())
    .markerSize(14f)
    .build();

// ❌ 不推荐：完全自定义颜色（除非有特殊需求）
new MarkerConfig.Builder()
    .backgroundColor(0xFF123456)
    .textColor(0xFF789ABC)
    .build();
```

## 迁移指南

### 从旧版本迁移

如果您之前使用硬编码颜色，可以按以下方式迁移：

```java
// 旧版本
new MarkerConfig.Builder()
    .backgroundColor(0xFF4CAF50)  // 绿色
    .build();

// 新版本
MarkerPresets.googleGreen()
// 或
new MarkerConfig.Builder()
    .backgroundColor(MarkerColors.GOOGLE_GREEN)
    .build();
```

### 常见颜色映射

| 旧颜色值 | 新预设 | 说明 |
|----------|--------|------|
| `0xFF4CAF50` | `MarkerColors.GOOGLE_GREEN` | 绿色 |
| `0xFFF44336` | `MarkerColors.GOOGLE_RED` | 红色 |
| `0xFF2196F3` | `MarkerColors.GOOGLE_BLUE` | 蓝色 |
| `0xFFFF9800` | `MarkerColors.GOOGLE_YELLOW` | 黄色 |
| `0xFF9C27B0` | `MarkerColors.DIAMOND_PURPLE` | 紫色 |

## 总结

新的颜色预设系统提供了：

1. **统一的视觉体验** - 基于经过验证的配色方案
2. **简化的使用方式** - 预设方法减少代码复杂度
3. **灵活的自定义** - 完全保持自定义颜色的能力
4. **更好的可维护性** - 集中管理颜色定义
5. **向后兼容** - 现有代码无需修改即可工作

建议在新项目中优先使用预设颜色系统，在现有项目中逐步迁移到新的颜色预设。 